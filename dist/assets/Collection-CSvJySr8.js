import{r as t,P as T,S as L,j as e,a as E}from"./index-BjbOuBLy.js";import{T as F}from"./Title-D4NmpLxE.js";import{P as R}from"./ProductItem-CABqN4-8.js";const H=()=>{const{products:x,fetchProducts:g,totalPages:m,isLoading:N,error:p}=t.useContext(T),[o,v]=t.useState(!1),[i,u]=t.useState([]),[d,b]=t.useState([]),[c,y]=t.useState("relevant"),[n,r]=t.useState(1),{search:j}=t.useContext(L),C={page:n,sort:c==="low-high"?"lowToHigh":c==="high-low"?"highToLow":"",category:i.join(","),subCategory:d.join(","),search:j};t.useEffect(()=>{g(C)},[g,i,d,c,n,j]);const w=s=>{const a=s.target.value;u(l=>l.includes(a)?l.filter(h=>h!==a):[...l,a]),r(1)},S=s=>{const a=s.target.value;b(l=>l.includes(a)?l.filter(h=>h!==a):[...l,a]),r(1)},f=()=>{u([]),b([]),y("relevant"),r(1)},k=()=>r(s=>Math.max(s-1,1)),P=()=>r(s=>Math.min(s+1,m));return N?e.jsx("p",{children:"Loading..."}):p?e.jsx("p",{style:{color:"red"},children:p}):e.jsxs("div",{className:"flex flex-col gap-1 pt-10 border-t sm:flex-row sm:gap-10",children:[e.jsxs("div",{className:"min-w-60",children:[e.jsxs("p",{onClick:()=>v(!o),className:"flex items-center gap-2 my-2 text-xl cursor-pointer",children:["FILTERS",e.jsx("img",{className:`h-3 sm:hidden ${o?"rotate-90":""}`,src:E.dropdown_icon,alt:"Dropdown"})]}),e.jsxs("div",{className:`border border-gray-300 pl-5 py-3 mt-6 ${o?"":"hidden"} sm:block`,children:[e.jsx("p",{className:"mb-3 text-sm font-medium",children:"CATEGORIES"}),e.jsx("div",{className:"flex flex-col gap-2 text-sm font-light text-gray-700",children:["Men","Women","Kids"].map(s=>e.jsxs("label",{className:"flex gap-2 cursor-pointer",children:[e.jsx("input",{className:"w-3",type:"checkbox",value:s,onChange:w,checked:i.includes(s)}),s]},s))})]}),e.jsxs("div",{className:`border border-gray-300 pl-5 py-3 my-5 ${o?"":"hidden"} sm:block`,children:[e.jsx("p",{className:"mb-3 text-sm font-medium",children:"TYPES"}),e.jsx("div",{className:"flex flex-col gap-2 text-sm font-light text-gray-700",children:["Topwear","Bottomwear","Winterwear"].map(s=>e.jsxs("label",{className:"flex gap-2 cursor-pointer",children:[e.jsx("input",{className:"w-3",type:"checkbox",value:s,onChange:S,checked:d.includes(s)}),s]},s))})]}),(i.length>0||d.length>0||c!=="relevant")&&e.jsx("button",{className:`px-4 py-2 mt-1 text-white bg-black rounded hover:bg-gray-900 ${o?"block":"hidden"} sm:block`,onClick:f,children:"Clear Filters"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-4 text-base sm:text-2xl",children:[e.jsx(F,{text1:"ALL",text2:"COLLECTIONS"}),e.jsxs("select",{onChange:s=>{y(s.target.value),r(1)},value:c,className:"px-2 text-sm border-2 border-gray-300",children:[e.jsx("option",{value:"relevant",children:"Sort by: Relevant"}),e.jsx("option",{value:"low-high",children:"Sort by: Low to High"}),e.jsx("option",{value:"high-low",children:"Sort by: High to Low"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4 gap-y-6",children:Array.isArray(x)&&x.length>0?x.map(s=>e.jsx(R,{id:s._id,name:s.name,image:s.image,price:s.price},s._id)):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-gray-500",children:"No products found."}),e.jsx("button",{className:"mt-4 px-4 py-2 text-white bg-black rounded hover:bg-gray-900",onClick:f,children:"Reset Filters"})]})}),e.jsxs("div",{className:"flex justify-center mt-8",children:[e.jsx("button",{disabled:n===1,onClick:k,className:"px-4 py-2 mr-2 bg-gray-200 rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2",children:["Page ",n," of ",m]}),e.jsx("button",{disabled:n===m,onClick:P,className:"px-4 py-2 ml-2 bg-gray-200 rounded disabled:opacity-50",children:"Next"})]})]})]})};export{H as default};
