import{r as c,e as y,j as e,B as u,c as f}from"./index-BjbOuBLy.js";import{T as b}from"./Title-D4NmpLxE.js";const v=()=>{const[s,p]=c.useState({name:"",email:"",shippingAddress:{street:"",city:"",state:"",zip:"",country:""},mobile:""}),[m,d]=c.useState(!1),{getUserProfile:g}=y();c.useEffect(()=>{(async()=>{var r,l,i,n,h;d(!0);try{const t=await g();p({name:t.name||"",email:t.email||"",shippingAddress:{street:((r=t.shippingAddress)==null?void 0:r.street)||"",city:((l=t.shippingAddress)==null?void 0:l.city)||"",state:((i=t.shippingAddress)==null?void 0:i.state)||"",zip:((n=t.shippingAddress)==null?void 0:n.zip)||"",country:((h=t.shippingAddress)==null?void 0:h.country)||""},mobile:t.mobile||""})}catch(t){console.error("Error fetching user data:",t),u.error("Failed to fetch user profile.")}finally{d(!1)}})()},[]);const a=o=>{const{name:r,value:l}=o.target;if(r.startsWith("shippingAddress.")){const i=r.split(".")[1];p(n=>({...n,shippingAddress:{...n.shippingAddress,[i]:l}}))}else p(i=>({...i,[r]:l}))},x=async()=>{const o={email:s.email,shippingAddress:{...s.shippingAddress},mobile:s.mobile};d(!0);try{(await f.post("/auth/update-profile",o,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).status===200&&u.success("Profile updated!")}catch(r){console.error("Error updating profile:",r),u.error("Failed to update profile. Please try again.")}finally{d(!1)}};return m?e.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:e.jsx("p",{className:"text-lg font-semibold",children:"Loading..."})}):e.jsx("div",{className:"flex items-center justify-center min-h-[80vh] border-t pt-[5%] sm:pt-10",children:e.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-[480px]",children:[e.jsx("div",{className:"text-xl sm:text-2xl text-center",children:e.jsx(b,{text1:"PROFILE",text2:"DETAILS"})}),e.jsx("input",{name:"name",value:s.name,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded",type:"text",placeholder:"Name"}),e.jsx("input",{name:"email",value:s.email,onChange:a,className:"disabled:bg-gray-100 cursor-not-allowed w-full px-4 py-2 border border-gray-300 rounded",type:"email",disabled:!0,placeholder:"Email Address"}),e.jsx("input",{name:"shippingAddress.street",value:s.shippingAddress.street,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded",type:"text",placeholder:"Street"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{name:"shippingAddress.city",value:s.shippingAddress.city,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded",type:"text",placeholder:"City"}),e.jsx("input",{name:"shippingAddress.state",value:s.shippingAddress.state,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded",type:"text",placeholder:"State"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{name:"shippingAddress.zip",value:s.shippingAddress.zip,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded",type:"text",placeholder:"Zip Code"}),e.jsx("input",{name:"shippingAddress.country",value:s.shippingAddress.country,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded",type:"text",placeholder:"Country"})]}),e.jsx("input",{name:"mobile",value:s.mobile,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded",type:"text",placeholder:"Mobile"}),e.jsx("div",{className:"w-full mt-4 text-end",children:e.jsx("button",{onClick:x,className:"px-16 py-3 text-sm text-white bg-black active:bg-gray-800",children:"SAVE PROFILE"})})]})})};export{v as default};
