import{r,R as N,j as e,c as w,B as p,O as k}from"./index-BjbOuBLy.js";import{T as C}from"./Title-D4NmpLxE.js";function R({product:s,onClose:l}){const[n,c]=r.useState(0),[d,x]=r.useState(""),[u,m]=r.useState(!0),[t,o]=r.useState(!1),{addReview:i}=r.useContext(N),g=a=>{c(a)},v=async()=>{var a,j,f;if(n===0){alert("Please select a rating");return}o(!0);try{const h={productId:(a=s==null?void 0:s.productId)==null?void 0:a._id,productName:(j=s==null?void 0:s.productId)==null?void 0:j.name,rating:n,comment:d,price:s==null?void 0:s.price};if(i((f=s==null?void 0:s.productId)==null?void 0:f._id,h),(await w.post("/review",h,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).status!==201)throw new Error("Failed to submit review");p.success("Review submitted. Thank you!"),m(!1),l()}catch(h){p.error(h.response.data.message)}finally{o(!1)}},y=()=>{m(!1),l()},b=a=>({1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"})[a]||"Click to rate";return!s||!s.productId?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Product information not available"}),e.jsx("button",{onClick:l,className:"mt-4 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Close"})]})}):u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md relative",children:[e.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold z-10",children:"×"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Write a Review"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Share your experience with this product"})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:s.productId.name}),e.jsxs("p",{className:"text-gray-600 text-xs",children:["Quantity: ",s.quantity]}),e.jsxs("p",{className:"text-neutral-800 font-semibold text-sm",children:["$",s.price]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Your Rating"}),e.jsx("div",{className:"flex space-x-2 mb-2",children:[1,2,3,4,5].map(a=>e.jsx("button",{type:"button",onClick:()=>g(a),className:`text-4xl transition-all duration-200 hover:scale-110 focus:outline-none ${a<=n?"text-orange-500":"text-gray-300 hover:text-orange-500"}`,children:"★"},a))}),e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:b(n)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Your Review (Optional)"}),e.jsx("textarea",{value:d,onChange:a=>x(a.target.value),rows:"4",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent resize-none text-gray-700 placeholder-gray-400",placeholder:"Tell us about your experience with this product..."})]}),e.jsx("button",{onClick:v,disabled:t,className:`w-full font-semibold py-3 px-6 rounded-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-500/30 ${t?"bg-gray-400 cursor-not-allowed text-white":"bg-neutral-800 hover:bg-neutral-900 text-white hover:shadow-lg"}`,children:t?"Submitting...":"Submit Review"})]})]})]})}):null}const O=()=>{const{orders:s,fetchUserOrders:l}=r.useContext(k),[n,c]=r.useState(!1),[d,x]=r.useState(null);r.useEffect(()=>{l()},[]);const u=t=>{console.log(t),x({...t}),c(!0)},m=()=>{c(!1),x(null)};return e.jsxs("div",{className:"min-h-screen sm:max-w-[90%] mx-auto",children:[e.jsx("div",{children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 pt-20 ",children:e.jsxs("div",{className:"",children:[e.jsx(C,{text1:"YOUR",text2:"ORDERS"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Track and review your recent purchases"})]})})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-gray-600",children:"Your order history will appear here once you make your first purchase."})]}):e.jsx("div",{className:"space-y-6",children:s.map((t,o)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-neutral-800 to-neutral-900 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Order #",o+1]}),e.jsxs("p",{className:"text-md mt-1",children:[t.items.length," item",t.items.length>1?"s":""]})]})}),e.jsx("div",{className:"divide-y divide-gray-100",children:t.items.map((i,g)=>e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-150",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:i.productId.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:["$",i.price]}),e.jsx("span",{children:"×"}),e.jsxs("span",{children:["Quantity: ",i.quantity]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["Total: $",(i.price*i.quantity).toFixed(2)]})]})]})]})}),e.jsxs("button",{onClick:()=>u(i),className:"ml-4 inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-sm font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),"Review"]})]})},g))}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsxs("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Delivery Address"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.shippingAddress.address}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.shippingAddress.city," -"," ",t.shippingAddress.postalCode,","," ",t.shippingAddress.country]})]})]})})]},o))})}),n&&e.jsx(R,{product:d,onClose:m})]})};export{O as default};
