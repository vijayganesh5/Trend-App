import{u as R,r as t,j as e,B as b,b as E,C as T,P as _,a as g,c as L}from"./index-BjbOuBLy.js";import{T as A}from"./Title-D4NmpLxE.js";import{P as F}from"./ProductItem-CABqN4-8.js";const $=({category:l,subCategory:n})=>{const{fetchRelatedProducts:p}=R(),[d,a]=t.useState([]),[f,x]=t.useState(!1),[m,u]=t.useState(null);return t.useEffect(()=>{(async()=>{if(l&&n){x(!0);try{const c=await p(l,n);a(c)}catch(c){u(c.message||"Failed to fetch related products"),b.error(c.message||"Failed to fetch related products")}finally{x(!1)}}})()},[l,n,p]),e.jsxs("div",{className:"my-24",children:[e.jsx("div",{className:"py-2 text-3xl text-center",children:e.jsx(A,{text1:"RELATED",text2:"PRODUCTS"})}),f?e.jsx("p",{children:"Loading related products..."}):m?e.jsx("p",{children:m}):d.length===0?e.jsx("p",{children:"No related products available."}):e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-y-6",children:d.map((o,c)=>e.jsx(F,{id:o._id,name:o.name,image:o.image,price:o.price},c))})]})},q=()=>{const{productId:l}=E(),{currency:n,addToCart:p}=t.useContext(T),{fetchProductById:d}=t.useContext(_),[a,f]=t.useState(null),[x,m]=t.useState(""),[u,o]=t.useState(""),[c,v]=t.useState("description"),[S,N]=t.useState(!1),[w,j]=t.useState(null),[C,D]=t.useState([]);t.useEffect(()=>{(async()=>{N(!0),j(null);try{const s=await d(l),y=await L.get(`/review/${l}`);D(y.data),s?(f(s),m(s.image[0])):(j("Product not found"),b.error("Product not found"))}catch(s){j(s.message||"Failed to fetch product"),b.error(s.message||"Failed to fetch product")}finally{N(!1)}})()},[l,d]);const i=C;return S?e.jsx("div",{className:"pt-10 text-center",children:"Loading..."}):w?e.jsx("div",{className:"pt-10 text-center text-red-500",children:w}):a?e.jsxs("div",{className:"pt-10 transition-opacity duration-500 ease-in border-t-2 opacity-100",children:[e.jsxs("div",{className:"flex flex-col gap-12 sm:gap-12 sm:flex-row",children:[e.jsxs("div",{className:"flex flex-col-reverse flex-1 gap-3 sm:flex-row",children:[e.jsx("div",{className:"flex justify-between overflow-x-auto sm:flex-col sm:overflow-y-scroll sm:justify-normal sm:w-[18.7%] w-full",children:a.image.map((r,s)=>e.jsx("img",{src:`https://bug-cart-server.onrender.com/images/${r}.png`,onClick:()=>m(r),className:`w-[24%] sm:w-full sm:mb-3 flex-shrink-0 cursor-pointer ${x===r?"border-2 border-gray-600 py-2 px-2":""}`,alt:"Photo"},s))}),e.jsx("div",{className:"w-full sm:w-[80%]",children:e.jsx("img",{src:`https://bug-cart-server.onrender.com/images/${x}.png`,className:"w-full h-auto",alt:"Product"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"mt-2 text-2xl font-medium",children:a.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[[...Array(5)].map((r,s)=>e.jsx(e.Fragment,{children:e.jsx("img",{src:s<i.averageRating?g.star_icon:g.star_dull_icon,alt:"Star",className:"w-3.5 h-3.5"},s)})),"",i.averageRating," (",i.count,")"]}),e.jsxs("p",{className:"mt-5 text-3xl font-medium",children:[n,a.price]}),e.jsx("p",{className:"mt-5 text-gray-500 md:w-4/5",children:a.description}),e.jsxs("div",{className:"flex flex-col gap-4 my-8",children:[e.jsx("p",{children:"Select Size"}),e.jsx("div",{className:"flex gap-2",children:a.sizes.map((r,s)=>e.jsx("button",{onClick:()=>o(r),className:`border py-2 px-4 bg-gray-100 rounded-md ${r===u?"border-orange-500":""}`,children:r},s))})]}),e.jsx("button",{onClick:()=>p(a._id,u),className:"px-8 py-3 text-sm text-white bg-black active:bg-gray-700",children:"ADD TO CART"}),e.jsx("hr",{className:"mt-8 sm:w-4/5"}),e.jsxs("div",{className:"flex flex-col gap-1 mt-5 text-sm text-gray-500",children:[e.jsx("p",{children:"Guaranteed 100% Authentic – Shop with Confidence!"}),e.jsx("p",{children:"Enjoy Cash on Delivery – Pay at Your Doorstep!"}),e.jsx("p",{children:"Hassle-Free Returns & Exchanges – 10 Days, No Questions Asked!"})]})]})]}),e.jsxs("div",{className:"mt-20",children:[e.jsxs("div",{className:"flex border-b",children:[e.jsx("button",{className:`px-5 py-3 text-sm border-r ${c==="description"?"font-bold border-t border-l border-black bg-white":"text-gray-500"}`,onClick:()=>v("description"),children:"Description"}),e.jsxs("button",{className:`px-5 py-3 text-sm ${c==="reviews"?"font-bold border-t border-black border-l bg-white":"text-gray-500"}`,onClick:()=>v("reviews"),children:["Reviews (",i.reviews.length,")"]})]}),c==="description"?e.jsxs("div",{className:"flex flex-col gap-4 px-6 py-6 text-sm text-gray-500 border",children:[e.jsx("p",{children:a.description}),e.jsx("p",{children:"Elevate your style with our meticulously crafted Trendify quality products. Designed with a perfect balance of elegance and practicality..."})]}):e.jsx("div",{className:"px-6 py-6 text-sm text-gray-500 border",children:i.reviews.length===0?e.jsx("p",{children:"No reviews submitted yet."}):i.reviews.map(({rating:r,comment:s,createdAt:y,userId:h},k)=>e.jsxs("div",{className:"border-b py-4",children:[e.jsxs("p",{className:"text-xs text-gray-400 mb-2.5",children:[(h==null?void 0:h.name)&&e.jsxs("span",{children:[h.name," · "]}),new Date(y).toLocaleDateString()]}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((z,P)=>e.jsx("img",{src:P<r?g.star_icon:g.star_dull_icon,alt:"Star",className:"w-3.5 h-3.5"},P))}),e.jsx("p",{className:"mt-2 font-medium",children:s})]},k))})]}),e.jsx($,{category:a.category,subCategory:a.subCategory})]}):e.jsx("div",{className:"opacity-0"})};export{q as default};
