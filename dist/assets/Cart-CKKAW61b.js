import{j as t,L as u,G as g,r as l,C as b,P as f,a as v}from"./index-BjbOuBLy.js";import{T as y}from"./Title-D4NmpLxE.js";import{C as N}from"./CartTotal-4jDB2azO.js";const w=({onClose:s,onLogin:o,onSignup:a})=>t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-md w-[90%] max-w-md p-6 sm:p-8 relative",children:[t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"You are not logged in"}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Please login or signup to proceed with checkout."}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 mt-6",children:[t.jsx(u,{to:"/login",className:"bg-black text-white px-5 py-2 text-sm rounded hover:bg-gray-800 transition",children:"Login"}),t.jsx(u,{to:"/signup",className:"border border-gray-400 text-sm px-5 py-2 rounded hover:bg-slate-100 transition",children:"Signup"})]}),t.jsx("button",{onClick:s,className:"absolute top-3 right-4 text-gray-400 hover:text-black text-xl",children:"Ã—"})]})});function C(s){return g({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"},child:[]}]})(s)}function I(s){return g({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(s)}const z=()=>{const{cartItems:s,currency:o,updateQuantity:a,navigate:n,getCart:k,isLoading:m,error:c}=l.useContext(b),{products:p}=l.useContext(f),[h,d]=l.useState(!1),x=s.length===0,j=!!sessionStorage.getItem("token")||!!localStorage.getItem("token");return t.jsxs("div",{className:"border-t pt-14",children:[t.jsx("div",{className:"mb-3 text-2xl",children:t.jsx(y,{text1:"YOUR",text2:"CART"})}),m&&t.jsx("p",{children:"Loading cart..."}),c&&t.jsx("p",{className:"text-red-500",children:c}),t.jsx("div",{children:s.map(e=>{const i=p.find(r=>r._id===e.productId._id);return i?t.jsxs("div",{className:"grid py-4 text-gray-700 border-t border-b grid-cols-[4fr_0.5fr_0.5fr] sm:grid-cols-[4fr_2fr_0.5fr] items-center gap-4",children:[t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsx("img",{className:"w-16 sm:w-20",src:`${i.image[0]}`,alt:"Photo"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium sm:text-lg",children:i.name}),t.jsxs("div",{className:"flex items-center gap-5 mt-2",children:[t.jsxs("p",{children:[o," ",i.price.toFixed(2)]}),t.jsx("p",{className:"px-2 border sm:px-3 sm:py-1 bg-slate-50",children:e.size||"N/A"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[t.jsx("button",{onClick:()=>a(e.productId._id,e.size,Math.max(e.quantity-1,0)),className:"text-gray-700 hover:text-black","aria-label":"Decrease quantity",children:t.jsx(C,{size:20})}),t.jsx("input",{onChange:r=>{r.target.value!==""&&r.target.value!=="0"&&a(e.productId._id,e.size,Number(r.target.value))},className:"px-1 py-1 border max-w-12 text-center sm:max-w-20 sm:px-2",type:"number",min:1,value:e.quantity,readOnly:!1}),t.jsx("button",{onClick:()=>a(e.productId._id,e.size,e.quantity+1),className:"text-gray-700 hover:text-black","aria-label":"Increase quantity",children:t.jsx(I,{size:20})})]}),t.jsx("img",{onClick:()=>a(e.productId._id,e.size,0),className:"w-4 mr-4 cursor-pointer sm:w-5",src:v.bin_icon,alt:"Remove"})]},e.productId._id):(console.warn(`Product not found for ID: ${e.productId._id}`,e),t.jsxs("div",{className:"py-4 text-gray-500",children:["Product data unavailable (ID: ",e.productId._id,") - Quantity:"," ",e.quantity]},e.productId._id))})}),t.jsx("div",{className:"flex justify-end my-20",children:t.jsxs("div",{className:"w-full sm:w-[450px]",children:[t.jsx(N,{}),t.jsx("div",{className:"w-full text-end",children:t.jsx("button",{onClick:()=>{j?n("/place-order"):d(!0)},className:`px-8 py-3 my-8 text-sm text-white bg-black active:bg-gray-700 ${x?"opacity-50 cursor-not-allowed":""}`,disabled:x,children:"PROCEED TO CHECKOUT"})})]})}),h&&t.jsx(w,{onClose:()=>d(!1),onLogin:()=>n("/login"),onSignup:()=>n("/signup")})]})};export{z as default};
